
<strong>Input BidsDataset:</strong> <%= link_to_userfile_if_accessible @task.bids_dataset %>
<% if @task.bids_app_prepared_output %>
<br>
<strong>Prepared BidsAppOutput:</strong> <%= link_to_userfile_if_accessible @task.bids_app_prepared_output %>
<% end %>


<p>

<% if @task.new_record? %>

  <%=
    #############################################################
    # Pipeline Builder
    #############################################################
    render :partial => task_partial('task_params_0_pipeline', 'CbrainTask::BidsAppHandler'),
           :locals  => { :form => form, :params => params }
  %>

  <p>

  <%=
    #############################################################
    # Sessions List
    #############################################################
    render :partial => task_partial('task_params_1_sessions', 'CbrainTask::BidsAppHandler'),
           :locals  => { :form => form, :params => params }
  %>

  <p>

<% end %>

<%=
#############################################################
# Participants List
#############################################################
render :partial => task_partial('task_params_2_participants', 'CbrainTask::BidsAppHandler'),
       :locals  => { :form => form, :params => params }
%>

<p>

<%
# Mandatory BidsDataset input
%>
<%= form.params_hidden_field :_cb_bids_id %>
<%
# Optional BidsAppOutput input
%>
<%= form.params_hidden_field :_cb_prep_output %>

<hr>

<% boutiques_inputs = @task.class.raw_partial(:orig_task_params) %>
<% locals           = { :params  => @task.params, :form => form } %>
<%= render :inline => boutiques_inputs, :locals => locals %>

